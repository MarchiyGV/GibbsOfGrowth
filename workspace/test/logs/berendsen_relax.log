shell rm log.lammps

shell mkdir ../${path}/${dat}
shell mkdir ../workspace/test/${dat}
shell mkdir ../workspace/test/dat
WARNING: Shell command 'mkdir' failed with error 'File exists' (../input.cpp:1213)

variable thermo_step_BR equal 500
variable dump_step_BR equal 500
variable rnd_seed_BR index 12345
include ../${path}/input.txt
include ../workspace/test/input.txt
variable pot_path index potentials
variable potname index GB_potential_AgNi.txt
variable potname_pure index GB_potential_AgNi_pure.txt
variable element1 index Ag
variable element2 index Ni

variable T_init equal 10
variable T equal 600
variable berendsen_relax_steps_init equal 20000
variable berendsen_relax_steps equal 180000

variable dt_BR equal 0.001
print " "
 
print "%%%%%%%%%%%%%%%%%%%%%%%%%"
%%%%%%%%%%%%%%%%%%%%%%%%%
print "----------input----------"
----------input----------
shell cat ../${path}/input.txt
shell cat ../workspace/test/input.txt
print " "
 
print "%%%%%%%%%%%%%%%%%%%%%%%%%"
%%%%%%%%%%%%%%%%%%%%%%%%%
print " "
 
variable dt equal ${dt_BR}
variable dt equal 0.001


variable dump_path index ${path}/${dump}/${self}
variable dump_path index workspace/test/${dump}/${self}
variable dump_path index workspace/test/dump/${self}
variable dump_path index workspace/test/dump/berendsen_relax
shell mkdir ../${path}/${dump}
shell mkdir ../workspace/test/${dump}
shell mkdir ../workspace/test/dump
WARNING: Shell command 'mkdir' failed with error 'File exists' (../input.cpp:1213)
shell mkdir ../${dump_path}
shell mkdir ../workspace/test/dump/berendsen_relax
WARNING: Shell command 'mkdir' failed with error 'File exists' (../input.cpp:1213)

timestep ${dt}
timestep 0.001

# ATOMS DEFINITION
read_data ../${structure}
read_data ../workspace/test/dat/polycrystall.dat
Reading data file ...
  orthogonal box = (0.0000000 0.0000000 0.0000000) to (100.00000 100.00000 100.00000)
  1 by 1 by 1 MPI processor grid
  reading atoms ...
  56445 atoms
  read_data CPU = 0.061 seconds

######################################
# DEFINE INTERATOMIC POTENTIAL

shell cd ../${pot_path}
shell cd ../potentials
include ${potname_pure}
include GB_potential_AgNi_pure.txt
pair_style eam/fs
pair_coeff * * Ag-Ni.eam.fs.txt Ag
neighbor 2.0 bin
neigh_modify delay 10 check yes
shell cd ../${home}
shell cd ../scripts

######################################
# DEFINE THERMO AND OUTPUT

thermo_style custom time temp press pe
thermo ${thermo_step_BR}
thermo 500
shell mkdir ../${path}/${thermo_output}
shell mkdir ../workspace/test/${thermo_output}
shell mkdir ../workspace/test/thermo_output
WARNING: Shell command 'mkdir' failed with error 'File exists' (../input.cpp:1213)
variable file index ../${path}/${thermo_output}/${self}.txt
variable file index ../workspace/test/${thermo_output}/${self}.txt
variable file index ../workspace/test/thermo_output/${self}.txt
variable file index ../workspace/test/thermo_output/berendsen_relax.txt
print "##dt = ${dt}" file ${file} screen no
print "##dt = ${dt}" file ../workspace/test/thermo_output/berendsen_relax.txt screen no
print "#time; temp; press; pe" append ${file} screen no
print "#time; temp; press; pe" append ../workspace/test/thermo_output/berendsen_relax.txt screen no
fix out all print ${thermo_step_BR} "$(time); $(temp); $(press); $(pe)" append ${file} screen no
fix out all print 500 "$(time); $(temp); $(press); $(pe)" append ${file} screen no
fix out all print 500 "$(time); $(temp); $(press); $(pe)" append ../workspace/test/thermo_output/berendsen_relax.txt screen no
dump 1 all cfg ${dump_step_BR} ../${dump_path}/dump_*.cfg mass type xs ys zs
dump 1 all cfg 500 ../${dump_path}/dump_*.cfg mass type xs ys zs
dump 1 all cfg 500 ../workspace/test/dump/berendsen_relax/dump_*.cfg mass type xs ys zs
dump_modify 1 element ${element1}
dump_modify 1 element Ag
print "dumpfile ../${dump_path}/dump_0.cfg"
dumpfile ../workspace/test/dump/berendsen_relax/dump_0.cfg
######################################
# START
velocity all create $(v_T_init*2) ${rnd_seed_BR} mom no rot no
velocity all create 20 ${rnd_seed_BR} mom no rot no
velocity all create 20 12345 mom no rot no